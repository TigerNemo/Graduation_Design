# 数据统计与xgb模型训练
天池O2O新手赛   AUC=0.7980 排名 508/21362

     data_processing.py 数据预处理部分，包括数据集打标和数据集划分;
     feat_section.py    特征区间的特征工程代码
     label_section.py   预测区间的特征工程代码
     model.py           xgb模型训练

## 一.数据集划分
使用时间窗口划分法划分数据

| |特征区间|预测区间|
   |:---|:---|:---|
|测试集|20160501~20160630|20160701~20160731|
|训练集|20160401~20160531|20160601~20160630|


## 二.特征工程
特征工程的重点是构建用户，商家，优惠券三大特征群，以及 用户-商家，用户-优惠券，商家-优惠券 三个交叉特征群。
每个特征群主要特征有：

统计特征（最大/最小/平均值/比率 等）  
排序特征（各个实体对时间，距离，折扣率等的排序）  
时间特征（日期，时间差等）

### 用户特征 
- 用户 领取/核销/不核销 优惠券的次数，种类，及领取/核销比例，及领取优惠券种类占所有优惠券的比重
- 用户 领取/核销/不核销 商家的种类， 及领取/核销比例， 及领券商家种类占所有商家的比重
- 用户 领取/核销/不核销 距离的 最大，最小，平均
- 用户 领取/核销/不核销 折扣率，左值/右值 最大，最小，平均
- 用户 领取/核销/不核销 左值0-50 50-200 200-500 的核销次数/率

### 商家特征
- 商家被 领取/核销/不核销 优惠券次数，种类，及领取/核销比例，及种类占所有优惠券的比重
- 商家被 领取/核销/不核销 用户数，及平均每个用户核销多少张
- 商家被 领取/核销/不核销 距离，最大，最小，平均
- 商家被 领取/核销/不核销 折扣率，左值/右值 最大，最小，平均
- 商家被 领取/核销/不核销 折扣率 最大，最小，平均

### 优惠券特征
- 优惠券 领取/核销/不核销 次数 用户数
- 优惠券 领取/核销/不核销 距离  最大/最小/平均

### 用户*商家特征
- 用户商家 领取/核销/不核销 次数，领取/核销比
- 用户商家 核销/不核销 次数 占 总的核销/不核销比重

### 用户*优惠券特征
- 用户优惠券 领取/核销/不核销 次数，领取/核销比
- 用户优惠券 核销/不核销 次数 占 总的核销/不核销比重

### 排序特征
- 用户与距离，领券时间，优惠券左值/右值/折扣率排序(正倒序)
- 商家与距离，领券时间，优惠券左值/右值/折扣率排序(正倒序)
- 优惠券与距离，领券时间，优惠券左值/右值/折扣率排序(正倒序)
- 用户 商家 联合 排序特征
- 用户 优惠券 联合 排序特征